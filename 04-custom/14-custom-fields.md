# Произвольное поле Custom Fields
https://wp-kama.ru/function/get_post_meta  
Custom Fields не удобен, поэтому лучше использовать плагин ACF.  
Custom Fields работает только как текстовое поле также они не удобны.  
Чтобы создавать произвольные поля отличные от текстового поля, например чекбоксы, списки, загрузки изображений и т.п нужно использовать метабоксы.

Получает значение произвольного поля у записи (поста). Позволяет также получить все метаполя.

Метабокс - это при редактировании поста, например: статус и видимость, шаблон (если установлен для записи), постоянная ссылка, изображение записи (миниатюра) и т.д.

Произвольное поле `Custom Fields` - это при редактировании поста, созданное вебмастером поле, куда вносятся дополнительные данные поста. Обычно располагаются под блоком `content`.

## Подключение
Чтобы начать работать с произвольными полями нужно их включить: `Редактирование поста > Три точки (справа сверху) > Предпочтения > Панели > Дополнительно > Произвольные поля (Включить и перезагрузить)`.

Снизу контента поста должен появиться метабокс `Произвольные поля`.

Для пользовательских типов записей поддержку `Произвольные поля` подключают в functions.php, в `register_post_type()` нужно добавить параметр `custom-fields`

    'supports' => array('title', 'editor', 'thumbnail', 'custom-fields'),

Снизу контента пользовательского поста появится метабокс `Произвольные поля`.

## Создание
Создадим произвольное поле `legioner_price`:
- нажмите на ссылку `Введите новое`
- имя: `legioner_price`
- значение: `1000`
- `Добавить произвольное поле`
- `Обновить` пость
- новое пользовательское поле должно появиться под контентом
- данное пользовательское поле доступно и в постах

## Получение
Чтобы получить значение произвольного поля нужно воспользоваться функцией `get_post_meta()` с параметрами:

    $meta_values = get_post_meta( $post_id, $key, $single );

- `$post_id` - id поста
- `$key` - ключ произвольного поля, если он не передан, то выберутся все произвольные поля
- `$single` - необязательно, false по умолчанию, возвращает массив или первый элемент, если true

Пример вывода значения произвольного поста (код писать внутри цикла, только внутри него может работать функция get_the_ID()):

    // Вывод одного произвольного поля по его ключу
    $meta_values = get_post_meta( get_the_ID(), 'legioner_price' );
    // var_dump($meta_values);
    echo $meta_values[0]; // 1000

    // Вывод всех произвольных полей со значениями, так удобнее
    $meta_values = get_post_meta( get_the_ID() );
    legioner_debug($meta_values);

Функции:
- `get_post_meta()` - получить значение произвольного поля
- `the_meta()` -  тег шаблона, который выводит все поля поста
- `get_post_custom()` и `get_post_meta()` - возвращает одну или все метаданные поста
- `get_post_custom_values()` - возвращает значения для пользовательского поля поста

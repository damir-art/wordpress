# Пользовательские таксономии
## register_taxonomy()

Создание пользовательских таксономий.

* https://wp-kama.ru/id_8218/taksonomii-v-wordpress.html
* https://wp-kama.ru/function/register_taxonomy
* **Плагин:** https://ru.wordpress.org/plugins/custom-post-type-ui/

Таксономия состоит их элементов таксономии (terms, термины). Записи привязываются к элементам таксономии.

Таксономия - это то, как записи разбиваются на разные категории или метки.

Пост (post) - нативный тип записи, имеет таксономию: рубрики и метки.

Пример создания таксономии:

    add_action( 'init', 'foo' );
    function foo() {
        register_taxonomy( 'taxonomy_name', [ 'post_name' ], [ 
            'key' => 'value',
            ...
        ]);
    }

Таксономии бывают:
- Древовидными: категории, рубрики
- Линейными (плоскими): метки, теги

Свойства таксономии:
- Древовидная или линейная
- К какому типу записи прикрепляется
- Чпу
- Остальные свойства

Причины создания таксономий:
- Быстрота разрабоки (масштабируемость)
- Чистота кода
- Производительность сайта

Создадим две таксономии для каталога недвижимости: города, квартиры.

- регистрируем новый тип записи
- обновляем ЧПУ: админка > настройки > постоянные ссылки > "сохранить изменения"
- чтобы выводить список "пользовательских записей", нужно добавить в функцию создания типа записи, строку "has_archive => true,"
- обновляем ЧПУ: админка > настройки > постоянные ссылки > "сохранить изменения"
- создаем файл-шаблон archive-имя_типа.php
- создаем файл-шаблон single-имя_типа.php
- создаем таксономию
- присваиваем типам записей теги/категории новой таксономии
- обновляем ЧПУ: админка > настройки > постоянные ссылки > "сохранить изменения"
- смотрим получившиеся урлы
- get_the_terms($post->ID, 'tax_name') вывод таксономии в цикле

Функция создания таксономии вешается на хук init, поэтому её можно разместить внутри пользовательской функции создания типа записи.

    register_taxonomy('tax_name', array('имя_типа_записи'), array(
        'labels'                => array(
            'name'              => 'Города',
            'singular_name'     => 'Город',
            'search_items'      => 'Найти город',
            'all_items'         => 'Все города',
            'view_item '        => 'Посмотреть город',
            'edit_item'         => 'Редактировать город',
            'update_item'       => 'Обновить город',
            'add_new_item'      => 'Добавить новый город',
            'new_item_name'     => 'Добавить новый',
            'menu_name'         => 'Города',
        ),
        'description'           => '', // описание таксономии
        'public'                => true,
        'hierarchical'          => false
    ));

    city/moscow

    city   - таксономия, аналог category
    moscow - имя категории/тега

# inc
Подключение файла:

```php
/**
* В чем разница между ними читайте ниже
*/
require_once __DIR__ . '/inc/foo.php';
require_once get_template_directory() . '/inc/foo.php';
```

Помимо файл шаблонов в теме могут быть различные папки, их можно называть как угодно, но обычно есть имена папок которые используют чаще всего, например `inc` (для файлов подключаемых в functions.php), `template-parts` (для файлов подключаемых в шаблонах).

Отнести к разделу курса: Организация кода темы.

# Подключаем файлы в functions.php
В WordPress есть возможность подключать дополнительные файлы с кодом внутри основного файла `functions.php`. Это делается с помощью стандартных PHP-функций `include`, `require`, `include_once` и `require_once`. Рассмотрим, какие из них лучше использовать и почему.

## include и include_once
Эти функции используются для подключения файлов, когда отсутствие подключаемого файла не является критическим. То есть, если файл не будет найден, выполнение скрипта продолжится, но появится предупреждение.

```php
include 'path/to/your/file.php';
include_once 'path/to/your/file.php'; // Подключает файл только один раз
```

## require и require_once
Эти функции аналогичны `include`, за исключением того, что они выдают фатальную ошибку, если указанный файл не найден. Это полезно, когда подключаемый файл содержит важные данные или функции, без которых работа сайта невозможна.

```php
require 'path/to/your/file.php';
require_once 'path/to/your/file.php'; // Подключает файл только один раз
```

## Когда использовать каждую из этих функций?
- `include` / `include_once` - используйте эти функции, если подключение файла не является обязательным для корректной работы сайта. Например, для подключения дополнительных стилей или скриптов.
- `require` / `require_once` - используйте эти функции, если подключаемый файл необходим для нормальной работы сайта. Например, для подключения важных функций или настроек.

Предположим, у нас есть дополнительный файл `custom-functions.php`, в котором содержатся пользовательские функции, необходимые для работы нашего сайта. Мы можем подключить его в `functions.php` следующим образом:

```php
// functions.php
require_once __DIR__ . '/custom-functions.php';
```

Здесь мы используем `require_once`, потому что этот файл важен для работы сайта, и его отсутствие приведет к ошибкам.

## Важные моменты
1. **Используйте абсолютные пути**. Чтобы избежать проблем с путями, рекомендуется всегда указывать полный путь к файлу относительно текущего каталога. Для этого можно использовать магическую константу `__DIR__`, которая возвращает директорию текущего файла.
2. **Не забывайте про пространство имен**. Если ваш сайт использует пространства имен, убедитесь, что все функции и классы находятся в правильном пространстве имен.
3. **Оптимизируйте производительность**. Избегайте ненужных подключений файлов, особенно тех, которые редко используются. Это поможет снизить нагрузку на сервер и ускорить работу сайта.

## Альтернативные методы
Хотя вышеописанные методы являются наиболее распространенными, существуют и другие способы подключения файлов в WordPress. Например, можно использовать хуки и фильтры для загрузки определенных файлов в нужные моменты времени. Но это уже выходит за рамки простого подключения файлов в `functions.php`.

Итак, для подключения других файлов с кодом в `functions.php` лучше всего использовать функции `require` или `require_once`, чтобы гарантировать, что все необходимые файлы будут загружены корректно.

# Аналоги include
В WordPress API нет прямых аналогов функций `include`, `require`, `include_once` и `require_once`, поскольку эти функции относятся к основному языку программирования PHP, а не специфически к WordPress. Тем не менее, в WordPress есть свои механизмы для подключения и выполнения файлов, которые обеспечивают большую гибкость и безопасность.

## Хуки и фильтры
Одним из основных способов добавления функционала в WordPress является использование хуков и фильтров. Они позволяют вам добавлять или изменять поведение системы без необходимости редактирования исходного кода ядра WordPress.

Примером может служить регистрация кастомного шорткода или функции через хук `init`:

```php
add_action('init', function () {
  // Ваш код здесь
});
```

## Автозагрузка классов и функций
Для больших проектов часто используется автозагрузка классов и функций. В этом случае вам не нужно вручную подключать каждый файл, достаточно настроить автозагрузчик в соответствии с PSR-4 стандартом.

Пример настройки автозагрузки в `composer.json`:

```json
{
  "autoload": {
    "psr-4": {
      "MyNamespace\\": "src/"
    }
  }
}
```

После этого вы сможете использовать ваши классы и функции без явного подключения файлов.

## Функции для работы с плагинами и темами
WordPress предоставляет специальные функции для работы с плагинами и темами, которые могут быть полезны для подключения дополнительных файлов.

- `load_plugin_textdomain` - используется для локализации текста в плагине.
- `get_template_directory_uri` - возвращает URL директорию активной темы.
- `get_stylesheet_directory_uri` - возвращает URL директорию дочерней темы.

Эти функции помогают вам работать с файлами в контексте конкретной темы или плагина.

## get_template_part()
Как я уже упоминал ранее, функция `get_template_part()` используется для включения частей шаблона в WordPress. Хотя она не является прямым аналогом `include`, ее можно использовать для динамического подключения файлов в зависимости от контекста.

Пример:

```php
get_template_part('template-part-name');
```

## Заключение
Хотя в WordPress API нет прямых аналогов функций `include`, `require`, `include_once` и `require_once`, система предлагает множество альтернативных методов для достижения аналогичных целей. Выбор подходящего метода зависит от ваших конкретных потребностей и архитектуры проекта.

# Разница между __DIR__ и get_template_directory()
Использование `__DIR__` и `get_template_directory()` имеет разные цели и контексты применения в WordPress. Давайте разберем, зачем в данном случае был использован `__DIR__` вместо `get_template_directory()`.

## __DIR__
Магическая константа `__DIR__` в PHP возвращает абсолютный путь до каталога, в котором находится текущий исполняемый скрипт. Это означает, что если вы используете `__DIR__` в файле `functions.php`, то результат будет полным путем до папки с вашей темой.

Преимущества использования `__DIR__`:
- **Абсолютность пути**: всегда гарантированно получите правильный путь независимо от местоположения файла.
- **Простота и надежность**: нет необходимости в дополнительной проверке или обработке путей.
- **Безопасность**: меньше шансов допустить ошибку в пути, так как константа всегда вернет верный каталог.

Пример:

```php
require_once __DIR__ . '/custom-functions.php';
```

Этот код гарантирует, что файл `custom-functions.php` будет найден и включен, даже если структура вашего проекта изменится.

## get_template_directory()
Функция `get_template_directory()` в WordPress возвращает путь до корневой директории текущей активной темы. Эта функция полезна, когда вам нужно получить доступ к файлам, находящимся в папке темы.

Преимущества использования `get_template_directory()`:
- **Контекст темы**: всегда возвращает путь до текущей активной темы, что удобно для работы с ресурсами темы.
- **Динамичность**: позволяет легко переключаться между разными темами без изменения кода.

Пример:

```php
require_once get_template_directory() . '/custom-functions.php';
```

Этот код включит файл `custom-functions.php`, находящийся в папке активной темы. Если вы смените тему, то автоматически будете использовать файл из новой темы.

## Почему __DIR__ лучше подходит в данном случае?
Когда речь идет о подключении файлов внутри самой темы, использование `__DIR__` предпочтительнее, потому что:

1. **Непосредственная связь с текущим файлом**: `__DIR__` гарантирует, что файл будет найден относительно текущего файла, что уменьшает вероятность ошибок.
2. **Универсальность**: подходит для любых файлов, вне зависимости от того, связаны ли они с темой или плагином.
3. **Читаемость и поддержка**: код становится проще для понимания и сопровождения, так как явно указывается, откуда берется файл.

Таким образом, использование `__DIR__` в данном примере обеспечивает стабильность и предсказуемость при работе с файлами внутри темы.

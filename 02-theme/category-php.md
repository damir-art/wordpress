# category.php
Функции для файл-шаблона **category.php**

`single_cat_title( $prefix, $display )` - получаем имя категории/метки, используется за пределами цикла.

Код цикла:

```php
<?php if ( have_posts() ): ?>
  <?php while( have_posts() ): the_post(); ?>
    <h2><?php the_title() ?></h2> 
  <?php endwhile; ?>
  <?php the_posts_pagination(); ?>
<?php 
  else:
    get_template_part( 'tmp/no-posts' );
  endif;
?>
```

## Вывод рубрик (архивной записи?)
- объект рубрик
- цикл рубрик
- вывод свойств рубрик

Код:

```php
<?php
  // Получаем массив объектов, где каждый объект это категория
  $cats = get_categories();

  // Проверка массива на пустоту
  if ( $cats ):
?>

  <!-- Если массив не пустой, то выводим HTML-теги и категории. -->
  <ul>
    <?php 
      foreach( $cats as $cat ):
        $cat_link = get_category_link( $cat->cat_ID );
    ?>
    <a href="<?php echo $cat_link; ?>"><?php echo $cat->name; ?></a>
    <?php endforeach; ?>
  </ul>

<?php
  endif;
?>
```

## Вывод описания категории
Чтобы вывести описание категории в шаблоне WordPress, можно воспользоваться функцией `category_description()`. Эта функция выводит описание выбранной категории, если оно было задано в админке WordPress.

Пример использования:

```php
if (is_category()) {
  single_cat_title(); // Выводит название категории
  $cat_ID = get_queried_object_id(); // Получаем ID текущей категории
  echo category_description($cat_ID); // Выводим описание категории
}
```

Объяснение кода:
1. Условие `is_category()` проверяет, находится ли пользователь на странице категории.
2. Функция `get_queried_object_id()` получает ID текущей категории.
3. Функция `category_description($cat_ID)` выводит описание категории с указанным ID.

Также можно использовать функцию `single_cat_title()` для получения названия категории:
```php
if (is_category()) {
  single_cat_title(); // Выводит название категории
}
```

Если вам нужно получить данные о конкретной категории без проверки условий, то можно использовать объект WP_Term:

```php
$term = get_term_by('slug', 'your-category-slug', 'category'); // Замените your-category-slug на нужный slug

if ($term && ! is_wp_error($term)) {
  echo $term->name; // Название категории
  echo $term->description; // Описание категории
}
```

Таким образом, вы сможете выводить описание категорий в нужных местах вашего шаблона.

## Получаем название текущей категории и её родителя
Получить название текущей категории и её родительской категории в WordPress можно несколькими способами. Рассмотрим два основных подхода.

### Использование функции get_the_category()
Эта функция возвращает массив объектов категорий текущего поста. Если категория имеет родителя, то информация о нём тоже доступна.

```php
// Получаем массив всех категорий текущего поста
$categories = get_the_category();

if (!empty($categories)) {
  // Берём первую категорию из массива
  $currentCategory = $categories[0];

  // Выводим название текущей категории
  echo 'Текущая категория: ' . $currentCategory->name;

  if ($currentCategory->parent > 0) {
    // Получаем информацию о родительской категории
    $parentCategory = get_category($currentCategory->parent);
    // Выводим название родительской категории
    echo 'Родительская категория: ' . $parentCategory->name;
  }
}
```

### Использование функции get_queried_object()
Эта функция полезна, когда вы находитесь на странице категории (например, на странице архива категории). Она возвращает текущий объект запроса, будь то категория, тег, автор и так далее.

```php
if (is_category()) {
  // Получаем текущий объект запроса (в данном случае категорию)
  $queriedObject = get_queried_object();

  // Выводим название текущей категории
  echo 'Текущая категория: ' . $queriedObject->name;

  if ($queriedObject->parent > 0) {
    // Получаем информацию о родительской категории
    $parentCategory = get_category($queriedObject->parent);
    // Выводим название родительской категории
    echo 'Родительская категория: ' . $parentCategory->name;
  }
}
```

Оба способа позволяют получить название текущей категории и её родительской категории. Первый подход полезен, когда вы работаете с конкретными постами, второй — когда вы находитесь на страницах категорий.

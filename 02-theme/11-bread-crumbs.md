# bread crumbs

Код для подключения хлебных крошек, плагина **Breadcrumb NavXT**:

```html
<div class="breadcrumbs" typeof="BreadcrumbList" vocab="https://schema.org/">
  <?php
    if(function_exists('bcn_display')) {
      bcn_display();
    }
  ?>
</div>
```

Создание хлебных крошек для страницы в WordPress требует определения текущего местоположения пользователя на сайте и построения цепочки навигационных ссылок, ведущих обратно к корню сайта. Для этого нам понадобятся функции, которые позволят определить, где именно находится пользователь, и построить соответствующую структуру хлебных крошек.

Ниже приведён пример кода, который создаёт хлебные крошки для страницы, находящейся в определённой категории. Этот код предполагает, что вы используете стандартный шаблон WordPress и хотите вывести хлебные крошки вне основного цикла (Loop).

## Создание хлебных крошек у страницы с категорией
### Шаги для создания хлебных крошек:
1. Определить текущую категорию страницы.
2. Получить ссылку на категорию.
3. Вывести название страницы.

### Пример кода:

```php
<?php
// Функция для получения текущей категории страницы
function get_current_category() {
  $categories = get_the_category();
  if ( ! empty( $categories ) ) {
    return $categories[0]; // Возврат первой категории
  }
  return null;
}

// Функция для получения ссылки на категорию
function get_category_link( $category ) {
  if ( $category ) {
    return get_category_link( $category->term_id );
  }
  return '';
}

// Функция для получения названия страницы
function get_page_title() {
  return get_the_title();
}

// Основная логика для вывода хлебных крошек
$category = get_current_category();
$category_name = $category ? $category->name : '';
$category_link = get_category_link( $category );
$page_title = get_page_title();

// Выводим хлебные крошки
echo '<div class="breadcrumbs">';
echo '<a href="' . home_url() . '">Главная</a>'; // Главная страница
if ( $category_name ) {
  echo ' / <a href="' . $category_link . '">' . $category_name . '</a>'; // Категория
}
echo ' / ' . $page_title; // Название страницы
echo '</div>';
?>
```

### Объяснение кода:
1. **Функция `get_current_category()`**:
  - Использует `get_the_category()` для получения массива категорий, связанных с текущей страницей.
  - Возвращает первую категорию из массива.

2. **Функция `get_category_link($category)`**:
  - Принимает объект категории и использует `get_category_link()` для получения URL категории.

3. **Функция `get_page_title()`**:
  - Использует `get_the_title()` для получения заголовка текущей страницы.

4. **Основная логика**:
  - Сначала определяется текущая категория и её имя.
  - Затем строится структура хлебных крошек, которая включает ссылку на главную страницу, ссылку на категорию (если она существует), и название текущей страницы.

### Применение:
Добавьте этот код в нужное место вашего шаблона, например, в файл `header.php` или `single.php`, чтобы отображать хлебные крошки на соответствующих страницах.

Этот пример поможет вам создать простую реализацию хлебных крошек для страниц в WordPress.

## Создание хлебных крошек у страницы с категорией и родительской
Чтобы включить родительские категории в хлебные крошки, нужно немного расширить логику. Мы будем получать всю иерархию категорий, начиная с самой верхней родительской категории и заканчивая текущей категорией страницы. Ниже представлен обновленный код, который учитывает родительские категории.

### Обновленный код:

```php
<?php
// Функция для получения текущей категории страницы
function get_current_category() {
  $categories = get_the_category();
  if ( ! empty( $categories ) ) {
    return $categories[0]; // Возврат первой категории
  }
  return null;
}

// Функция для получения ссылки на категорию
function get_category_link( $category ) {
  if ( $category ) {
    return get_category_link( $category->term_id );
  }
  return '';
}

// Функция для получения названия страницы
function get_page_title() {
  return get_the_title();
}

// Функция для получения всех родительских категорий
function get_parent_categories( $category ) {
  $parents = [];
  while ( $category->parent != 0 ) {
    $category = get_category( $category->parent );
    array_unshift( $parents, $category );
  }
  return $parents;
}

// Основная логика для вывода хлебных крошек
$category = get_current_category();
$category_name = $category ? $category->name : '';
$category_link = get_category_link( $category );
$page_title = get_page_title();

// Получаем родительские категории
$parent_categories = get_parent_categories( $category );

// Выводим хлебные крошки
echo '<div class="breadcrumbs">';
echo '<a href="' . home_url() . '">Главная</a>'; // Главная страница

foreach ( $parent_categories as $parent ) {
  echo ' / <a href="' . get_category_link( $parent ) . '">' . $parent->name . '</a>'; // Родительские категории
}

if ( $category_name ) {
  echo ' / <a href="' . $category_link . '">' . $category_name . '</a>'; // Текущая категория
}

echo ' / ' . $page_title; // Название страницы
echo '</div>';
?>
```

### Объяснение изменений:
1. **Новая функция `get_parent_categories($category)`**:
  - Эта функция рекурсивно проходит вверх по дереву категорий, начиная с текущей категории, пока не достигнет корня (категории с `parent == 0`).
  - Все найденные родительские категории сохраняются в массиве `$parents`.

2. **Цикл `foreach`**:
  - Перед выводом текущей категории теперь выполняется цикл, который последовательно выводит все родительские категории с соответствующими ссылками.

### Применение:
Этот код можно добавить в те же места, что и предыдущий вариант, например, в файлы `header.php` или `single.php`. Теперь ваши хлебные крошки будут включать полную иерархию категорий, что улучшит навигацию по сайту и сделает его более удобным для пользователей.

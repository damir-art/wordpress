# Базовые понятия
WordPress REST API базовые понятия.

- JSON
- HTTP клиент
- маршрут, эндпоинт
- пространство имён
- CRUD
- ресурс
- путь к ресурсу
- запрос
- ответ
- HTTP методы
- схема
- обнаружение
- контроллер
- CURIE (компактный URL)

## JSON
JSON - простой и удобный формат данных. REST получает и отдает JSON. Это позволяет разработчикам создавать, читать и обновлять контент WordPress с клиентского JavaScript или из внешних приложений, написанных на любом языке программирования.

## HTTP клиент
HTTP клиент - инструмент для работы с REST API. Создает HTTP запросы, обрабатывает HTTP ответы.

Примеры HTTP клиентов:
- `Postman` - программа или расширение для Chrome
- `REST Easy` - расширение для Firefox для тестирования запросов в браузере
- `httpie` - тестирование запросов в командной строке.
- `WordPress HTTP API` - клиент самого WordPress. Его, например, можно использовать для доступа к одному сайту WordPress с другого.

## Маршруты и эндпоинты
`Маршрут` (route, роут) - это имя, которое отсылает работу API к определенным эндпоинтам. Маршрут - это URL к которому можно обратиться разными HTTP методами. Маршрут может иметь несколько эндпоинтов.

`Эндпоинт` (endpoint, конечная точка) - это само обращение к маршруту отдельным HTTP методом. Эндпоинт выполняет конкретную задачу, принимает параметры и возвращают данные клиенту.

Разбор на примере URL `domain/wp-json/wp/v2/posts/123`:
- `wp-json/` - базовый путь REST API, корневой маршрут, показывает все доступные маршруты, обратившысь к маршрутам можно посмотреть какие эндпоинты доступны
- `wp/v2/posts/123` - маршрут
- маршрут имеет 3 эндпоинта:
  - `GET` - запускает метод get_item() и возвращает данные поста клиенту
  - `PUT|PATCH|POST` - запускает метод update_item(), обновляет данные и возвращает их клиенту
  - `DELETE` - запускает метод delete_item(), удаляет пост и возвращает только что удаленные данные клиенту

Без ЧПУ маршруты выглядят так:
- `domain/?rest_route=/` - корневой маршрут
- `domain/?rest_route=/wp/v2/posts/123` - получение поста 123

Все маршруты `routes:` можно посмотреть по адресу `domain/wp-json`.

## Пространство имён
Пространство имён это часть маршрута, например у маршрута `domain/wp-json/wp/v2/posts`, часть `/wp/v2/` является простарнством имен `/wp` это уникальное имя плагина/темы, а `/v2` версия плагина/темы.

Все простарнства имён `namespaces:` можно посмотреть по адресу `domain/wp-json`.

## CRUD
Сокращенно от create, read, update, delete: это короткое название всех видов операций маршрута, читать, создавать, обновлять и удалять что-либо (ресурс).

## Ресурс
Ресурс - это сущность в Wordpress: post (пост), page (статья), кастомная запись, элемент таксономи (терм), пользователь, комментарий и т.д. WP-API позволяет HTTP-клиентам выполнять CRUD операции с ресурсами.

Пример взаимодействия REST API с ресурсами:
- GET `/wp-json/wp/v2/posts` - получить коллекцию ресурсов (постов)
- GET `/wp-json/wp/v2/posts/123` - получить отдельный ресурс (пост 123)
- POST `/wp-json/wp/v2/posts` - создать новый ресурс (пост)
- DELETE `/wp-json/wp/v2/posts/123` - удалить ресурс (пост 123)

## Путь к ресурсу
Путь к ресурсу - это имя ресурса в маршруте.

- `wp/v2/posts` - маршрут
- `wp/v2/posts/{id}` - маршрут
- `/posts` - путь кресурсу

В пределах текущего пространства имён, путь к ресурсу должен быть уникальным.

## Запрос
Один из основных классов в структуре WordPress REST API это `WP_REST_Request`. Этот класс используется для получения информации из запроса.

## Ответ
Ответ - это данные которые вернутся из API в ответ на запрос. Ответы от конечных точек управляются классом `WP_REST_Response`.

## HTTP Методы
HTTP метод указывается при запросе клиентом и определяет тип действия, которое клиент хочет выполнить над ресурсом.

Методы которые используются в WP API:
- `GET` - используются для получения (чтения) ресурсов (например постов)
- `POST` - для создания ресурсов
- `POST/PUT/PATCH` - для обновления ресурсов
- `DELETE` - для удаления ресурсов
- `OPTIONS` - для получения полного описания маршрута

## Схема
Схема - это полное описание маршрута. Получить схему можно сделав OPTIONS запрос на маршрут.

Рассмотрим схему маршрута `/wp/v2/categories`:

    $ curl -X OPTIONS -i domian/wp-json/wp/v2/categories

## Обнаружение
Это процесс выяснения любых деталей о работе с REST API.

## Контроллер
Это PHP класс созданный по разработанному разработчиками WP стандарту `WP_REST_Controller`.

## CURIE (компактный URL)
CURIEs (Compact URIs) - URL записывается в компактном виде, чтобы понятно и универсально выглядеть в ответе API. Пример CURIE: `https://api.w.org/term` превратится в `wp:term` при генерации ответа API.

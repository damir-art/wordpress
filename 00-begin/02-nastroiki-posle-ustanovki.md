# Настройка WordPress после установки
После установки WordPress рекомендуется сделать некоторые начальные настройки *(сначала их можно и не делать, но со временем вам всё равно придется этим заняться)*.

Заходим в админку: `wp.loc/wp-login.php`

## Админка > Пользователи
- В админке переходим в раздел `Пользователи`
- Жмем по логину
- Можем указать `Имя`, `Фамилию`, `Ник` и как отображать вас на сайте

Там же можно менять Е-маил, пароль, написать о себе и многое другое.

Указываем свои данные, они укажут на автора статей и блога. Данные из профиля видны в RSS ленте (как данные автора), в комментариях и т.д. Можно просто изменить ник и установииь его в `Отображать как`.

## Админка > Настройки
Переходим в `Настройки > Общие`. Здесь можно изменить название сайта, описание, поменять Е-маил администратора сайта и т.д.

Переходим в `Настройки > Написание`. Здесь можно добавить или убрать ссылки на сервисы пингов `http://rpc.pingomatic.com/` *(пока можете пропустить)*.

Чтобы управлять пингами, можно установить плагин **WordPress Ping Optimizer** для уменьшения частоты пингов, чтобы сайт не приняли за спам *(работу с плагинами мы рассмотрим в следующих статьях)*.

Сервисы обновлений: https://hoboweb.ru/servisy-obnovlenija-wordpress/

Переходим в `Настройки > Чтение`. Выставляем в `Для каждой статьи в RSS-ленте отображать` **Отрывок**.

Переходим в `Настройки > Обсуждение`:
- Другие настройки комментариев:
    - Показывать галочку разрешения установки куки для авторов комментариев `(снять галочку)`.
    - Разрешить древовидные (вложенные) комментарии глубиной `2` уровней.
- Перед появлением комментария:
    - Комментарий должен быть одобрен вручную `(поставить галочку)`.
- Аватары
    - Аватар по умолчанию:
        - Ретро (Автоматически)

Переходим в `Настройки > Медиафайлы`. Здесь можно выставлять размеры изображений которые будут создавать при загрузке изображения на сайт *(пока ничего не меняем)*.

Например можно выставить такие размеры:
- Размер миниатюры: `300 x 300`
- Средний размер: `800 x 800`
- Крупный размер: `1600 x 1600`

Переходим в `Настройки > Постоянные ссылки`. Здесь можно задать какой вид будет у ссылок постов и страниц на сайте, настроить ЧПУ *(устанавливаем простые)*.

Но обычно для создания ЧПУ выставляют следующие параметры:
- Произвольно: `/%category%/%postname%`
- Далее ставят какой-нить плагин который переводит кириллические символы в адресе страницы в латиницу, например `Cyr-To-Lat`

## Админка > Инструменты > Здоровье сайта
Периодически заглядываем в раздел **Здоровье сайта**, который находится по пути: `Инструменты > Здоровье сайта`.

Здесь вам будут давать рекомендации по безопасности сайта, например удалить неиспользуемые плагины и темы, обновить версию PHP и т.п.

## Настройка WordPress на хостинге
После установки WordPress на хостинге (например Бегет), а не локально, можно настроить:
- добавить SSL-сертификат
- сделать редирект с http на https
- обновить версию PHP

### Настройка SSL (HTTPS)
Устанавливаем HTTPS (SSL-сертификат):
- Заходим в админку хостинга Бегет
- Переходим в раздел `Домены и поддомены`
- Жмём по иконке SSL *(управление SSL сертификатами)* напротив имени домена
- Подключаем бесплатный SSL сертификат `Let's Encrypt`, стандартный
- Когда SSL добавится *(через примерно 15-30 мин)*, то в админке WordPres изменяем протокол в имени домена с HTTP на HTTPS
- Это делается в: `Настройки > Общие > Адрес WordPress (URL) / Адрес сайта (URL)`

### Редирект с HTTP на HTTPS
После установки SSL сертификата, настраиваем редирект с HTTP на HTTPS:
- Заходим в админку хостинга Бегет
- Переходим в раздел `Сайты`
- Жмём по шестеренке напротив имени сайта
- Жмём по переключателю `Редирект с HTTP на HTTPS`
Время установки до 5 минут.

### Обновление версии PHP
На момент написания статьи, WordPress рекомендовал использовать PHP версии минимум `7.4`.
- Заходим в админку хостинга Бегет
- Переходим в раздел `Сайты`
- Жмем по шестеренке напротив имени сайта
- Версия PHP ставим не ниже `7.4`

Через 5-10 минут после всех настроек, заходим в админку WordPress, переходим в `Инструменты > Здоровье сайта` там должны исчезнуть предупреждения об отсутствии SSL, необходимости обновления PHP и т.п.

В случае возникновения каких-либо проблем, пишите в службу поддержки хостинга Бегет.

## wp-config.php
Открываем конфигурационный файл WordPress, находящийся по адресу `/wp-config.php`.  
Новые инструкции добавляем после строки `define( 'WP_DEBUG', false );`, между комментариями на 84 строке. В начале можно выставить две инструкции: отключить ревизии и увеличить параметр автосохранения. Либо не добавлять ничего.

    // Отключаем ревизии
    define('WP_POST_REVISIONS', 0);

    // Интервал автоматического сохранения записей, 60 по-умолчанию
    define('AUTOSAVE_INTERVAL', 120);

    // Отключаем возможность редактировать файлы вордпресса из админки
    define('DISALLOW_FILE_EDIT', true);

    // Включаем кеширование, понадобится при установке плагинов кеширования
    define('WP_CACHE', true);

    // Включить показ ошибок (false меняем на true на 81 строке)
    define( 'WP_DEBUG', true );

## Настраиваем robots.txt в WordPress
- https://wp-kama.ru/id_803/pishem-pravilnyiy-robotstxt-dlya-wordpress.html
- https://awayne.biz/pravilnyy-robots-txt-dlya-wordpress/
- https://seogio.ru/robots-txt-dlya-wordpress/

Начальный robots.txt, дальше по ситуации:

    User-agent: *                   # Создаем секцию правил для роботов. * значит для всех
                                    # роботов. Чтобы указать секцию правил для отдельного
                                    # робота, вместо * укажите его имя: GoogleBot, Yandex.
    Disallow: /cgi-bin              # Стандартная папка на хостинге.
    Disallow: /wp-admin/            # Закрываем админку.
    Allow: /wp-admin/admin-ajax.php # Откроем аякс.
    Disallow: /?                    # Все параметры запроса на главной.
    Disallow: *?s=                  # Поиск.
    Disallow: *&s=                  # Поиск.
    Disallow: /search               # Поиск.
    Disallow: /author/              # Архив автора.
    Disallow: */embed$              # Все встраивания.
    Disallow: */xmlrpc.php          # Файл WordPress API
    Disallow: *utm*=                # Ссылки с utm-метками
    Disallow: *openstat=            # Ссылки с метками openstat

    # Одина или несколько ссылок на карту сайта (файл Sitemap). Это независимая
    # директива и дублировать её для каждого User-agent не нужно. Так например
    # Google XML Sitemap создает 2 карты сайта:
    Sitemap: http://example.com/sitemap.xml
    Sitemap: http://example.com/sitemap.xml.gz

    # Версия кода: 2.0
    # Не забудьте поменять `example.com` на ваш сайт.

Также с версии WordPress 5.5 по-умолчанию установливается XML-карта сайта, поэтому ставить для этого дополнительные плагины нет смысла.

## SEO настройки
- Добавляем сайт в вебмастер: Яндекс
- Добавляем сайт в вебмастер: Гугл
- Файлы добавляем на хостинг в корневую папку домена
- Скрипты Метрики и Аналитикса подключаем через плагин `Code Snippets`
- Или ставим Гугл таг и подключаем скрипты туда
- Настраиваем .htaccess

## Создаём дочернюю тему
- В папке `wp-content/themes`, создаём папку с именем `twentytwentyone-child`
- В папке `twentytwentyone-child` создаём файл `style.css` см. след. урок.

## Плагины
- Ставим плагин `Code Snippets`, для добавления кода в `functions.php`
- Ставим стандартные часто используемые плагины
- Ставим тему
- Настраиваем тему (перед этим см "Отключаем сжатие изображений")
- Если тема из репозитория, создаем дочернюю
- Ставим начальные плагины

## Разное
- удаляем файл `license.txt`
- удаляем файл `readme.html`
- удаляем `wp-config-sample.php`

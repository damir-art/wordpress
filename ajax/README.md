# AJAX в WordPress
https://wp-kama.ru/id_2018/ajax-v-wordpress.html  
Из-за WP REST API, AJAX в WordPress становится менее актуальным.

С AJAX в WordPress работают в двух режимах:
- через админку (авторизованные пользователи), используя хук `wp_ajax_(action)`
- через паблик (посетители сайта), используя хук `wp_ajax_nopriv_(action)`

При работе с AJAX весь код можно писать в файле functions.php, в отдельном файле или файле плагина.

- `(action)` - придумываем сами, на этот динамический хук прицепим нашу функцию и в эту функцию WordPress направит AJAX запрос, для обработки
- все AJAX-запросы должны идти на один адрес: `ajaxurl`
  - который равен `var ajaxurl = '/wp-admin/admin-ajax.php'`
  - в админке `ajaxurl` уже определён
  - в публичной части `ajaxurl` нужно определять отдельно, чтобы сайт нормально переносился с одного хостинга на другой, чтобы он не зависел от домена

Файл `admin-ajax.php` сам определяет на какой action отправить AJAX-запрос. В AJAX-запросе мы передаём action.

Схема работы с AJAX в WordPress:
- Отправляется запрос: GET, POST ...
- На адрес: `/wp-admin/admin-ajax.php`
- Запрос обрабатывается в функции, которая прикреплена к динамическому хуку `wp_ajax_(action)`
- Имя `(action)` отправляется вместе с запросом
- Из функции возвращается обработанный запрос, через `echo`

## Разное
Для админской части сайт, jQuery подключен по-умолчанию, для работы в публичной части, jQuery нужно подключать.

В файле functions.php можно подключить отдельный файл с кодом:

    /**
    * Функция работы с AJAX в паблике (front-end)
    */
    require_once get_template_directory() . '/inc/ajax-public.php';

    /**
    * Функция работы с AJAX в админке (back-end)
    */
    require_once get_template_directory() . '/inc/ajax-admin.php';

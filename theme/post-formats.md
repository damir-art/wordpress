# Форматы постов
https://misha.agency/wordpress/post-formats.html

Форматы постов позволяют публиковать пользователю записи различных форматов: цитата, текстовая запись, чат, изображение, видео и др. У таких форматов публикаций можно использовать различный дизайн шаблонов. Подключаются они через `get_template_part()`.

Перед использованием форматов постов, нужно их активировать в файле **functions.php**

    add_theme_support( 'post-formats', array( 'aside', 'gallery', 'link', 'image', 'quote', 'status', 'video', 'chat', 'audio' ) );

Форматы которые вам не нужны, можете убрать из массива.

Далее в цикле вместо тегов цикла записываем:

    $post_format = get_post_format();
    get_template_part('parts/post', $post_format);

    имя файла формируется как "post + название формата + .php"

В папке parts создать следующие файлы post.php, post-aside.php, post-quote.php и т.д. В шаблонах форматов постов оставляйте только теги цикла WordPress, начало и конец цикла не включайте.

- `aside` (заметка) - обычно не содержит заголовка,
- `gallery` (галерея) - пост скорее всего содержит шорткод галереи (например `[gallery]`), а также загруженные в него (в пост) изображения
- `link` (ссылка) - здесь может быть два варианта: либо в качестве ссылки берётся первый тег `<a>` из поста, либо в качестве URL используется содержимое поста, а в качестве анкора - его заголовок
- `image` (изображение) - ситуация такая же, как и с ссылками, единственное только, что заголовок поста используется для alt и title атрибутов изображения
- `quote` (цитата) - в качестве цитаты берётся либо весь контент, либо только то, что внутри тега `<blockquote>`,
- `status` (статус) - короткое сообщение, в его роли обычно выступает содержимое записи,
- `video` (видео) - в качестве видео может выступать первый в содержимом поста `<video />`-тег, либо встроенное видео из YouTube, либо, если пост состоит только из URL, то этот URL может использоваться в качестве прямой ссылки на видеофайл, и последний вариант - это когда видеофайлы являются вложениями в пост
- `audio` (аудио) примерно так же, как и с видео,
- `chat` (чат)

Схема создания поста формата:
- создаем пост в админке
- выбираем `Формат записи: Изображение`
- заполняем заголовок, контент, миниатюру
- пока вывод ничем не отличается от простых записей

Сделаем вывод формата отличным от простых записей:
- в тег body добавляем body_class()
- в тег обертки поста добавляем post_class()
- get_template_part() - ищет и подключает указанный файл темы  
- echo get_post_format() - выведет формат поста (стандартный формат ничего не выводит)
- в корне темы создаём папку `template_parts`
  - content.php - файл для стандартного формата
  - content-image.php - для image формата
  - content-video.php - для video формата
  - внутри файлов помещаем текст `Format Post`
- вырезаем цикл (всё что находится внутри if)
- и вставляем вместо него: `<?php get_template_part( 'template-parts/content', get_post_format() ); ?>`
- сам цикл помещаем в файлы content*.php

Пример кода в файле content-image.php:

    <div class="d-flex flex-column bg-light p-3">
      <?php echo legioner_thumb(get_the_ID()); ?>
      <a href="<?php the_permalink() ?>"><h3><?php the_title() ?> (Image)</h3></a>
      <?php echo get_post_format(); ?>
      <?php the_excerpt() ?>
      <div class="mt-auto d-flex justify-content-between align-items-center">
        <a href="<?php the_permalink() ?>" class="btn btn-primary">Читать</a>
        <span class="text-secondary"><?php the_time('j F Y'); ?></span>
      </div>
      <div class="mt-2">
        <?php edit_post_link(); ?>
      </div>
    </div>

Пример кода в файле content-video.php (в цикле архивных страниц у формата видео выводим только видео):

- get_media_embedded_in_content() - проверяет HTML-код на наличе тегов audio, video, object, embed, iframe, возвращает массив с этими тегами

## Примеры
Примеры использования различный форматов постов:
- вывод списка песен (в виде файла) на странице архива, каждая песня это отдельная запись
